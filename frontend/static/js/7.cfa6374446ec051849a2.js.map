{"version":3,"sources":["webpack:///src/views/Setting.vue","webpack:///./src/views/Setting.vue?3cbd","webpack:///./src/views/Setting.vue"],"names":["Setting","name","data","_this","this","userForm","nickname","sex","intro","email","passwordForm","oldPassword","newPassword","passwordConfirm","userRules","passwordRules","required","message","min","max","validator","rule","value","callback","Error","trigger","created","resetUser","methods","handleUpdateUser","_this2","$refs","validate","vaild","JSON","parse","stringify_default","Object","user","then","res","$message","showClose","type","$store","commit","handleUpdatePassword","_this3","getters","uploadAvaterSuccess","val","computed","avaterUrl","$avaterUrl","avater","userId","headers","token","views_Setting","render","_vm","_h","$createElement","_c","_self","attrs","action","show-file-list","on-success","accept","staticClass","src","_v","ref","rules","label-position","model","label-width","status-icon","label","prop","$$v","$set","expression","on","click","staticStyle","color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.cfa6374446ec051849a2.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-card>\r\n      <el-upload\r\n        action=\"/api/uploadAvater\"\r\n        :headers=\"headers\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"uploadAvaterSuccess\"\r\n        accept=\".png, .jpg\"\r\n      >\r\n        <img :src=\"avaterUrl\" class=\"user_avater\" />\r\n      </el-upload>\r\n      <el-divider>\r\n        <span>INFOMATION</span>\r\n      </el-divider>\r\n      <el-form\r\n        :rules=\"userRules\"\r\n        label-position=\"left\"\r\n        :model=\"userForm\"\r\n        ref=\"userForm\"\r\n        label-width=\"100px\"\r\n        status-icon\r\n      >\r\n        <el-form-item label=\"昵称\" prop=\"nickname\">\r\n          <el-input v-model=\"userForm.nickname\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"userForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-select v-model=\"userForm.sex\">\r\n            <el-option label=\"男\" :value=\"0\"></el-option>\r\n            <el-option label=\"女\" :value=\"1\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"简介\" prop=\"intro\">\r\n          <el-input type=\"textarea\" v-model=\"userForm.intro\"></el-input>\r\n        </el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleUpdateUser\">保存</el-button>\r\n        <el-button @click=\"resetUser\">重置</el-button>\r\n      </el-form>\r\n      <el-divider>\r\n        <span style=\"color:red\">DANGER</span>\r\n      </el-divider>\r\n      <el-form\r\n        :rules=\"passwordRules\"\r\n        label-position=\"left\"\r\n        :model=\"passwordForm\"\r\n        ref=\"passwordForm\"\r\n        label-width=\"100px\"\r\n        status-icon\r\n      >\r\n        <el-form-item label=\"旧密码\" prop=\"oldPassword\">\r\n          <el-input type=\"password\" v-model=\"passwordForm.oldPassword\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n          <el-input type=\"password\" v-model=\"passwordForm.newPassword\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"passwordConfirm\">\r\n          <el-input type=\"password\" v-model=\"passwordForm.passwordConfirm\"></el-input>\r\n        </el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleUpdatePassword\">修改密码</el-button>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { updateUser, updatePassword, uploadAvater } from \"@/api/user\";\r\nexport default {\r\n  name: \"Setting\",\r\n  data() {\r\n    return {\r\n      userForm: {\r\n        nickname: \"\",\r\n        sex: 0,\r\n        intro: \"\",\r\n        email: \"\"\r\n      },\r\n      passwordForm: {\r\n        oldPassword: \"\",\r\n        newPassword: \"\",\r\n        passwordConfirm: \"\"\r\n      },\r\n      userRules: {},\r\n      passwordRules: {\r\n        oldPassword: [\r\n          {\r\n            required: true,\r\n            message: \"密码不能为空\"\r\n          }\r\n        ],\r\n        newPassword: [\r\n          {\r\n            required: true,\r\n            message: \"密码不能为空\"\r\n          },\r\n          { min: 3, max: 15, message: \"长度在3到15个字符\" }\r\n        ],\r\n        passwordConfirm: [\r\n          {\r\n            required: true,\r\n            message: \"请确认密码\"\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value !== this.passwordForm.newPassword)\r\n                callback(new Error(\"密码输入不一致\"));\r\n              callback();\r\n            },\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.resetUser();\r\n  },\r\n  methods: {\r\n    handleUpdateUser() {\r\n      this.$refs.userForm.validate(vaild => {\r\n        if (vaild) {\r\n          const data = JSON.parse(JSON.stringify(this.userForm));\r\n          updateUser(data).then(res => {\r\n            if (res === true) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"资料修改成功\",\r\n                type: \"success\"\r\n              });\r\n            }\r\n            this.$store.commit(\"setInfo\", data);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    handleUpdatePassword() {\r\n      this.$refs.passwordForm.validate(vaild => {\r\n        if (vaild) {\r\n          const data = {\r\n            oldPassword: this.passwordForm.oldPassword,\r\n            newPassword: this.passwordForm.newPassword\r\n          };\r\n          updatePassword(data).then(res => {\r\n            if (res === true) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"密码修改成功\",\r\n                type: \"success\"\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resetUser() {\r\n      const user = this.$store.getters.user;\r\n      this.userForm.nickname = user.nickname;\r\n      this.userForm.sex = user.sex;\r\n      this.userForm.intro = user.intro;\r\n      this.userForm.email = user.email;\r\n    },\r\n    uploadAvaterSuccess(val) {\r\n      this.$store.commit(\"setAvater\");\r\n    }\r\n  },\r\n  computed: {\r\n    user() {\r\n      return this.$store.getters.user;\r\n    },\r\n    avaterUrl() {\r\n      return this.$avaterUrl(this.user.avater, this.user.userId);\r\n    },\r\n    headers() {\r\n      return {\r\n        token: this.$store.getters.token\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.user_avater {\r\n  width: 160px;\r\n  padding: 4px;\r\n  height: 160px;\r\n  border-radius: 5%;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Setting.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('el-upload',{attrs:{\"action\":\"/api/uploadAvater\",\"headers\":_vm.headers,\"show-file-list\":false,\"on-success\":_vm.uploadAvaterSuccess,\"accept\":\".png, .jpg\"}},[_c('img',{staticClass:\"user_avater\",attrs:{\"src\":_vm.avaterUrl}})]),_vm._v(\" \"),_c('el-divider',[_c('span',[_vm._v(\"INFOMATION\")])]),_vm._v(\" \"),_c('el-form',{ref:\"userForm\",attrs:{\"rules\":_vm.userRules,\"label-position\":\"left\",\"model\":_vm.userForm,\"label-width\":\"100px\",\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickname\"}},[_c('el-input',{model:{value:(_vm.userForm.nickname),callback:function ($$v) {_vm.$set(_vm.userForm, \"nickname\", $$v)},expression:\"userForm.nickname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.userForm.email),callback:function ($$v) {_vm.$set(_vm.userForm, \"email\", $$v)},expression:\"userForm.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"性别\",\"prop\":\"sex\"}},[_c('el-select',{model:{value:(_vm.userForm.sex),callback:function ($$v) {_vm.$set(_vm.userForm, \"sex\", $$v)},expression:\"userForm.sex\"}},[_c('el-option',{attrs:{\"label\":\"男\",\"value\":0}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"女\",\"value\":1}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"简介\",\"prop\":\"intro\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.userForm.intro),callback:function ($$v) {_vm.$set(_vm.userForm, \"intro\", $$v)},expression:\"userForm.intro\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleUpdateUser}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.resetUser}},[_vm._v(\"重置\")])],1),_vm._v(\" \"),_c('el-divider',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"DANGER\")])]),_vm._v(\" \"),_c('el-form',{ref:\"passwordForm\",attrs:{\"rules\":_vm.passwordRules,\"label-position\":\"left\",\"model\":_vm.passwordForm,\"label-width\":\"100px\",\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"oldPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.oldPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"oldPassword\", $$v)},expression:\"passwordForm.oldPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.newPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"newPassword\", $$v)},expression:\"passwordForm.newPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"passwordConfirm\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.passwordConfirm),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"passwordConfirm\", $$v)},expression:\"passwordForm.passwordConfirm\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleUpdatePassword}},[_vm._v(\"修改密码\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-081e87b3\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Setting.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-081e87b3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Setting.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Setting.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Setting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-081e87b3\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Setting.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-081e87b3\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Setting.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}