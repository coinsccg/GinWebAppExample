webpackJsonp([7],{ExA2:function(e,s){},XWS1:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=r("mvHQ"),t=r.n(o),a=r("vMJZ"),n={name:"Setting",data:function(){var e=this;return{userForm:{nickname:"",sex:0,intro:"",email:""},passwordForm:{oldPassword:"",newPassword:"",passwordConfirm:""},userRules:{},passwordRules:{oldPassword:[{required:!0,message:"密码不能为空"}],newPassword:[{required:!0,message:"密码不能为空"},{min:3,max:15,message:"长度在3到15个字符"}],passwordConfirm:[{required:!0,message:"请确认密码"},{validator:function(s,r,o){r!==e.passwordForm.newPassword&&o(new Error("密码输入不一致")),o()},trigger:"change"}]}}},created:function(){this.resetUser()},methods:{handleUpdateUser:function(){var e=this;this.$refs.userForm.validate(function(s){if(s){var r=JSON.parse(t()(e.userForm));Object(a.o)(r).then(function(s){!0===s&&e.$message({showClose:!0,message:"资料修改成功",type:"success"}),e.$store.commit("setInfo",r)})}})},handleUpdatePassword:function(){var e=this;this.$refs.passwordForm.validate(function(s){if(s){var r={oldPassword:e.passwordForm.oldPassword,newPassword:e.passwordForm.newPassword};Object(a.n)(r).then(function(s){!0===s&&e.$message({showClose:!0,message:"密码修改成功",type:"success"})})}})},resetUser:function(){var e=this.$store.getters.user;this.userForm.nickname=e.nickname,this.userForm.sex=e.sex,this.userForm.intro=e.intro,this.userForm.email=e.email},uploadAvaterSuccess:function(e){this.$store.commit("setAvater")}},computed:{user:function(){return this.$store.getters.user},avaterUrl:function(){return this.$avaterUrl(this.user.avater,this.user.userId)},headers:function(){return{token:this.$store.getters.token}}}},l={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("el-card",[r("el-upload",{attrs:{action:"/api/uploadAvater",headers:e.headers,"show-file-list":!1,"on-success":e.uploadAvaterSuccess,accept:".png, .jpg"}},[r("img",{staticClass:"user_avater",attrs:{src:e.avaterUrl}})]),e._v(" "),r("el-divider",[r("span",[e._v("INFOMATION")])]),e._v(" "),r("el-form",{ref:"userForm",attrs:{rules:e.userRules,"label-position":"left",model:e.userForm,"label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{model:{value:e.userForm.nickname,callback:function(s){e.$set(e.userForm,"nickname",s)},expression:"userForm.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.userForm.email,callback:function(s){e.$set(e.userForm,"email",s)},expression:"userForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-select",{model:{value:e.userForm.sex,callback:function(s){e.$set(e.userForm,"sex",s)},expression:"userForm.sex"}},[r("el-option",{attrs:{label:"男",value:0}}),e._v(" "),r("el-option",{attrs:{label:"女",value:1}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"简介",prop:"intro"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.userForm.intro,callback:function(s){e.$set(e.userForm,"intro",s)},expression:"userForm.intro"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateUser}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:e.resetUser}},[e._v("重置")])],1),e._v(" "),r("el-divider",[r("span",{staticStyle:{color:"red"}},[e._v("DANGER")])]),e._v(" "),r("el-form",{ref:"passwordForm",attrs:{rules:e.passwordRules,"label-position":"left",model:e.passwordForm,"label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(s){e.$set(e.passwordForm,"oldPassword",s)},expression:"passwordForm.oldPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.newPassword,callback:function(s){e.$set(e.passwordForm,"newPassword",s)},expression:"passwordForm.newPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"passwordConfirm"}},[r("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.passwordConfirm,callback:function(s){e.$set(e.passwordForm,"passwordConfirm",s)},expression:"passwordForm.passwordConfirm"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdatePassword}},[e._v("修改密码")])],1)],1)],1)},staticRenderFns:[]};var i=r("VU/8")(n,l,!1,function(e){r("ExA2")},"data-v-081e87b3",null);s.default=i.exports}});
//# sourceMappingURL=7.cfa6374446ec051849a2.js.map