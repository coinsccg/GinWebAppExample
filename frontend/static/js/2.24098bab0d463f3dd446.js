webpackJsonp([2],{D9PO:function(e,t,n){"use strict";var s=n("mvHQ"),i=n.n(s),o=n("Ozlq"),a=n("vLgD");var r={name:"SaveQuestion",data:function(){return{categoryList:[],inputVisible:!1,questionForm:{caption:"",content:"",category_id:null},questionRules:{caption:[{required:!0,message:"问题标题不能为空"}]}}},created:function(){var e=this;if(this.hasQuestion){var t=this.question,n=this.questionForm;n.caption=t.caption,n.content=t.content}Object(a.a)({url:"/getCategoryList",method:"get"}).then(function(t){console.log(t),1e3!==t.code?e.$message({showClose:!0,message:t.message,type:"error"}):e.categoryList=t.data})},methods:{handleSaveQuestion:function(){var e=this;this.$refs.questionForm.validate(function(t){if(t){var n=JSON.parse(i()(e.questionForm));Object(o.d)(n).then(function(t){console.log(t.data),t.data>0&&e.$router.push({path:"/question",query:{question_id:t.data}})})}})},handleUpdateQuestion:function(){var e=this;this.$refs.questionForm.validate(function(t){if(t){var n=JSON.parse(i()(e.questionForm));n.questionId=e.question.questionId,Object(o.e)(n).then(function(t){!0===t&&e.$emit("updateQuestion",n)})}})},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.topic.$refs.input.focus()})}},computed:{hasQuestion:function(){return null!=this.question}},props:["question"]},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"questionForm",staticClass:"questionForm",attrs:{model:e.questionForm,rules:e.questionRules,"label-width":"100px","label-position":"left"}},[n("el-form-item",{attrs:{label:"标题",prop:"caption"}},[n("el-input",{model:{value:e.questionForm.caption,callback:function(t){e.$set(e.questionForm,"caption",t)},expression:"questionForm.caption"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"问题描述",prop:"content"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.questionForm.content,callback:function(t){e.$set(e.questionForm,"content",t)},expression:"questionForm.content"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"分类",prop:"categoryList"}},[n("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择"},model:{value:e.questionForm.category_id,callback:function(t){e.$set(e.questionForm,"category_id",t)},expression:"questionForm.category_id"}},e._l(e.categoryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.hasQuestion?n("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateQuestion}},[e._v("修改问题")]):n("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveQuestion}},[e._v("提问")])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(r,u,!1,function(e){n("j2np")},"data-v-3397250e",null);t.a=c.exports},FSjw:function(e,t){},G7FF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("yw6p"),i=n("D9PO"),o=n("kX6x"),a=n("vLgD");var r={data:function(){return{content:"",select:"1",questionInfos:[],userInfos:[],searched:!1,loading:!1,currentPage:1,pageSize:10,template:"",templates:[],showQuestion:!1}},methods:{handleSearch:function(){var e,t=this;(this.searched=!1,this.template=this.content.trim().toLowerCase(),""!==this.template)&&(this.currentPage=1,this.loading=!0,"1"===this.select?(e={title:this.template,userId:this.userId},Object(a.a)({url:"/searchQuestionInfos",method:"get",params:e})).then(function(e){t.questionInfos=e.questionInfos,t.templates=e.templates,t.searched=!0,t.loading=!1}):function(e){return Object(a.a)({url:"/searchUserInfos",method:"get",params:e})}({nickname:this.template,userId:this.userId}).then(function(e){t.userInfos=e,t.searched=!0,t.loading=!1}))},redFont:function(e){var t=this;if(null==e)return null;for(var n=e.toLowerCase(),s=0,i="",o=function(){var o=null,a=-1;if(t.templates.forEach(function(e){var t=n.indexOf(e,s);(-1===a||-1!==t&&t<a)&&(a=t,o=e)}),-1===a)return i+="<span>"+e.slice(s,n.length)+"</span>","break";i+="<span>"+e.slice(s,a)+"</span>",i+='<span class="font_red">'+e.slice(a,a+o.length)+"</span>",s=a+o.length};;){if("break"===o())break}return i}},computed:{questionInfoDatas:function(){return this.questionInfos.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},length:function(){return"1"===this.select?this.questionInfos.length:"2"===this.select?this.userInfos.length:void 0},userId:function(){return this.$store.userID}},components:{UserInfo:s.a,SaveQuestion:i.a,UserInfoTable:o.a}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"div_input"},[n("el-input",{staticStyle:{float:"left",width:"90%"},attrs:{placeholder:"搜索感兴趣的内容吧"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}},[n("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-option",{attrs:{label:"问题",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"用户",value:"2"}})],1),e._v(" "),n("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})],1),e._v(" "),n("el-button",{staticStyle:{float:"right"},on:{click:function(t){e.showQuestion=!0}}},[e._v("提问")])],1),e._v(" "),e.searched?n("div",{staticClass:"search_card"},["1"===e.select?n("el-card",{attrs:{"body-style":{padding:"10px"}}},[n("div",e._l(e.questionInfoDatas,function(t){return n("div",{key:t.question.questionId},[n("div",{staticClass:"question",domProps:{innerHTML:e._s(e.redFont(t.question.title))},on:{click:function(n){return e.toQuestion(t.question.questionId)}}}),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"},domProps:{innerHTML:e._s(e.redFont(t.question.detail))}}),e._v(" "),n("el-divider",{staticClass:"divider"})],1)}),0),e._v(" "),n("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1):e._e(),e._v(" "),"2"===e.select?n("UserInfoTable",{attrs:{userInfos:e.userInfos}}):e._e()],1):e._e(),e._v(" "),n("el-dialog",{attrs:{visible:e.showQuestion},on:{"update:visible":function(t){e.showQuestion=t}}},[e.showQuestion?n("SaveQuestion"):e._e()],1)],1)},staticRenderFns:[]};var c=n("VU/8")(r,u,!1,function(e){n("FSjw")},null,null);t.default=c.exports},KANv:function(e,t){},j2np:function(e,t){},kX6x:function(e,t,n){"use strict";var s=n("yw6p"),i=(n("vMJZ"),{name:"UserInfoTable",props:["userInfos"],data:function(){return{pageSize:10,currentPage:1}},created:function(){console.log(this.userInfos)},computed:{userInfoDatas:function(){return this.userInfos.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},components:{UserInfo:s.a}}),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{attrs:{"body-style":{padding:"10px"}}},[e._l(e.userInfoDatas,function(t){return n("div",{key:t.user.userId},[n("userInfo",{attrs:{userInfo:t}}),e._v(" "),n("el-divider",{staticClass:"divider"})],1)}),e._v(" "),n("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.userInfos.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],2)],1)},staticRenderFns:[]};var a=n("VU/8")(i,o,!1,function(e){n("KANv")},"data-v-3534e639",null);t.a=a.exports}});
//# sourceMappingURL=2.24098bab0d463f3dd446.js.map